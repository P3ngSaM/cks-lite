# 视觉执行 E2E 回归清单（Workbench / Automation）
更新时间：2026-02-08

## A. 自动化检查（本地已执行）
- [x] 前端构建通过（`desktop-app`）
  - 命令：`npm run build`
  - 结果：通过
- [x] Tauri 测试通过（`desktop-app/src-tauri`）
  - 命令：`cargo test`
  - 结果：`7 passed, 0 failed`
- [x] Agent 视觉相关 Python 编译通过
  - 命令：`python -m py_compile agent-sdk/core/agent.py agent-sdk/main.py agent-sdk/models/request.py`
  - 结果：通过

## B. 手工场景回归（演示前必跑）

### 场景 1：基础视觉闭环
- [ ] 输入目标：`打开记事本并输入 hello cks`
- [ ] 点击“开始视觉循环”
- [ ] 观察出现步骤卡片（含动作图标）
- [ ] 至少 1 条日志显示耗时（`xxms`）
- [ ] 成功结果：记事本内有文本，页面提示“视觉循环完成”

### 场景 2：停止与可控性
- [ ] 启动视觉循环后点击“停止循环”
- [ ] 日志出现“收到停止指令/已请求停止”
- [ ] 不再新增动作执行日志
- [ ] 成功结果：用户可随时中断，不会持续卡死

### 场景 3：失败恢复（重试失败步骤）
- [ ] 人为制造失败（例如设置不合理目标或焦点切走）
- [ ] 视觉循环中断后出现“重试失败步骤”按钮
- [ ] 点击重试，观察成功/失败反馈
- [ ] 成功结果：无需重跑整轮，可单步恢复

### 场景 4：失败接管到 Workbench
- [ ] 触发视觉循环失败或重复动作熔断
- [ ] 点击“转到工作台接管任务”
- [ ] Workbench 自动预填 seed prompt（含目标 + 最近日志）
- [ ] 成功结果：可无缝人工接管继续执行

### 场景 5：日志可传播
- [ ] 点击“复制日志”
- [ ] 粘贴到飞书/文档，日志内容包含“第 X 步”
- [ ] 成功结果：运维、排障、复盘可共享同一执行轨迹

## C. 演示通过判定（Go / No-Go）
- [ ] 至少通过 B 中 4/5 个场景
- [ ] 场景 1、4 必须通过（核心链路）
- [ ] 无乱码、无英文主文案、无明显卡死

## D. 失败时快速回退方案
- [ ] 禁用视觉循环，改走 Workbench 指挥模式（保留桌面工具）
- [ ] 使用“转到工作台接管任务”作为默认执行路径
- [ ] 演示中优先展示已稳定路径：飞书下发 -> Workbench 执行 -> Goals/Board 回流
